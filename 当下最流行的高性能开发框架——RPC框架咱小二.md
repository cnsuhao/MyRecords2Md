---
title: 当下最流行的高性能开发框架——RPC框架
date: 2018-04-14 07:54:00
categories: "开发"
tags:
	- Java
	- 通信
	- 编程语言
	- DNS
	- HBase

---

![当下最流行的高性能开发框架——RPC框架][RPC]

# **RPC概述** #

指远程过程调用协议，它是一种通过网络从远程计算机程序上请求服务。RPC采用客户机/服务器模式。请求程序就是一个客户机，而服务提供程序就是一个服务器。首先，客户机调用进程发送一个有进程参数的调用信息到服务进程，然后等待应答信息。在服务器端，进程保持睡眠状态直到调用信息的到达为止。当一个调用信息到达，服务器获得进程参数，计算结果，发送答复信息，然后等待下一个调用信息。最后，客户端调用进程接收答复信息，获得进程结果，然后调用执行继续进行。hadoop、hbase等分布式体系结构就是构建在RPC之上的。简单的rpc调用过程如下图：

![当下最流行的高性能开发框架——RPC框架][RPC 1]

当Client调用远程的方法时，先将要调用的方法名、参数等信息按RPC协议转换为RPC消息，然后再通过某种传输协议（TCP、HTTP等）将RPC消息传输到Server端。Server端接到请求后将RPC消息按协议转换为调用请求，并执行方法，将执行后的结果按类似的过程返回给Client端，完成一次RPC调用。

# **RPC框架原理** #

在RPC框架中主要有三个角色：Provider、Consumer和Registry。如下图所示：

![当下最流行的高性能开发框架——RPC框架][RPC 2]

节点角色说明：

 *  Server: 暴露服务的服务提供方。
 *  Client: 调用远程服务的服务消费方。
 *  Registry: 服务注册与发现的注册中心。

![当下最流行的高性能开发框架——RPC框架][RPC 3]

# **PC与HTTP、RMI等远程通信方式比较** #

 *  **RMI与RPC：**

RMI（Remote Method Invocation）是指java语言中的远程方法调用，RMI中的每个方法都具有方法签名，RMI客户端和服务器端通过方法签名进行远程方法调用。RMI只能在java语言中使用，可以把RMI看作面向对象的java RPC。

 *  **HTTP与RPC**

HTTP（HyperText Transfer Protocol）是应用层通信协议，使用标准语义访问指定资源（图片、接口等），网络中的中转服务器能识别协议内容。HTTP协议是一种资源访问协议，通过HTTP协议也可以完成远程请求并返回请求结果。HTTP的优点是简单、易用，可理解性好、并且与语言无关；HTTP协议的缺点是协议头比较重，一般请求到具体服务器的链路较长（可能会有dns解析、nginx代理等）。

相对于HTTP来说，通信层只是RPC协议的一部分，RPC可以使用TCP或者HTTP等作为通信协议。除了通信协议，RPC还包括请求序列化协议，一般RPC框架还会包括一些调度管理能力。RPC相对于HTTP的优点是能够提供调度、管理能力，使用RPC服务的自动化程度比较高，性能也十分优秀。缺点就是相对复杂，学习成本稍高。


[RPC]: http://p3.pstatp.com/large/pgc-image/15236010287518dba57a553
[RPC 1]: http://p3.pstatp.com/large/pgc-image/15236003830093e983994b8
[RPC 2]: http://p1.pstatp.com/large/pgc-image/152360047333076281f588f
[RPC 3]: http://p1.pstatp.com/large/pgc-image/1523601090644766f3ae53f
 *  **原文作者：** 咱小二
 *  **原文链接：** https://www.toutiao.com/item/6543817212354888199/
 *  **版权声明：** 本博客所有文章除特别声明外，均采用 [CC BY-NC-SA 4.0][] 许可协议。转载请注明出处。